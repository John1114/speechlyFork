<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset='utf-8'>
	<meta name='viewport' content='width=device-width,initial-scale=1'>

	<title>Speechly Intro Popup for Web Toolkit</title>

  <link rel='icon' type='image/png' href='../favicon.png'>
	<link rel='stylesheet' href='../global.css'>
  <link rel="stylesheet" href="speechly-ui.css">
 
	<script src='intro-popup.js'></script>
</head>

<body>

  <intro-popup hide="false" video="https://kampanisu.com/speechly/intro-popup/usage.mp4">
  </intro-popup>

  <h2>Element &lt;push-to-talk-button/&gt;</h2>
  <p>
    Autonomous customElement for connecting to Speechly and controlling listening on/off.
  </p>
  <button onclick="hideButton()">Hide button</button> <button onclick="showButton()">Show button</button>

  <h3>Attributes</h3>
  <ul>
    <li><code>appid</code> - Speechly App id to connect to.
    <li><code>poweron</code> - Optional string "true" | "false". Shows poweron state. If false, recording can immediately start but will first press will cause a system permission prompt. Default: "false" </li>
    <li><code>capturekey</code> - Optional string (of length 1). Defines a keyboard hotkey that with control listening on/off. Default: undefined. Recommendation: Space (" ")</li>
    <li><code>size</code> - Optional string (CSS). Defines the button frame width and height. Default: "6rem"</li>
    <li><code>hide</code> - Optional "false" | "true". Default: "false"</li>
    <li><code>placement</code> - Optional "bottom" turns on internal placement without PushToTalkContainer css class</li>
    <li><code>voffset</code> - Optional CSS string. Vertical distance from viewport edge. Only effective when using placement.</li>
    <li><code>intro</code> - Optional string containing a short usage introduction. Displayed when the component is first displayed. Default: "Push to talk". Set to "" to disable.</li>
    <li><code>hint</code> - Optional string containing a short usage hint. Displayed on a short tap. Default: "Push to talk". Set to "" to disable.</li>
    <li><code>fontsize</code> - Optional CSS string for hint text. Default: "1.2rem"</li>
    <li><code>showtime</code> - Optional number in ms. Visibility duration for intro and hint callouts. Default: "5000" (ms)</li>
    <li><code>textcolor</code> - Optional string (CSS color) for hint text. Default: "#ffffff"
    <li><code>backgroundcolor</code> - Optional string (CSS color) for hint text background. Default: "#202020"
    <li><code>gradientstop1</code> - Optional string (CSS color). Default: "#15e8b5"
    <li><code>gradientstop2</code> - Optional string (CSS color). Default: "#4fa1f9"
  </ul>
  <h3>Events emitted</h3>
  <ul>
    <li><code>holdstart</code> - CustomEvent triggered upon hold start</li>
    <li><code>holdend</code> - CustomEvent triggered upon hold end. event.detail.timeMs contains hold time in ms.</li>
    <li><code>speechsegment</code> - CustomEvent triggered when speech-to-text segment changes. Segment available as the event.details property.</li>
    <li><code>starting</code> - CustomEvent triggered on initialization start</li>
    <li><code>initialized</code> - CustomEvent triggered on initialization end. details: {success: true | false, status: "Ready" | "Failed" | "NoBrowserSupport" | "NoAudioConsent"}</li>
  </ul>
  <h3>Window messages emitted (postMessage)</h3>
  <ul>
    <li><code>{type: "speechsegment", segment: Segment}</code> - Broadcasts new segment when an update is available</li>
    <li><code>{type: "speechstate", state: ClientState}</code> - Broadcasts state changes. Refer to browser-client documentation for values.</li>
    <li><code>{type: "holdstart"}</code> - Broadcasted upon hold start</li>
    <li><code>{type: "holdend"}</code> - Broadcasted upon hold end</li>
  </ul>

  <h2>Element &lt;big-transcript/&gt;</h2>
  <p>
    <code>&lt;big-transcript/&gt;</code> is an overlay-style component for displaying real-time speech-to-text transcript.
  </p>
  <p>
    It is intended to be placed as an overlay near top-left corner of the screen using <code>BigTranscriptContainer</code> CSS class. It is momentarily displayed and automatically hidden after the end of voice input.
  </p>
  <button id="start-demo">Start demo transcript</button>
  <button id="stop-demo">Stop demo</button>

  <h3>Attributes</h3>
  <ul>
    <li><code>placement</code> - Optional "top" turns on internal placement without BigTranscriptContainer css class</li>
    <li><code>hoffset</code> - Optional CSS string. Horizontal distance from viewport edge. Only effective when using placement.</li>
    <li><code>voffset</code> - Optional CSS string. Vertical distance from viewport edge. Only effective when using placement.</li>
    <li><code>fontsize</code> - Optional CSS string for text size. Default: "1.5rem"</li>
    <li><code>color</code> - Optional string (CSS color) for text. Default: "#ffffff"
    <li><code>highlightcolor</code> - Optional string (CSS color) for entity highlighting, vu meter and acknowledged icon. Default: "#15e8b5"
    <li><code>backgroundcolor</code> - Optional string (CSS color) for hint text background. "none" for no background. Default: "#202020"
    <li><code>marginbottom</code> - Optional string (CSS dimension). Dynamic margin added when element is visible. Default: "0rem"
    <li><code>formattext</code> - Optional "true" | "false". If true, transcript is formatted with detected entities, e.g. numbers. Default: "true"
    <li><code>demomode</code> - Optional "true" | "false". If true, transitions are slowed down for better readablility. Default: "false"
  </ul>

  <h3>Properties</h3>
  <ul>
    <li><code>speechsegment(segment: Segment)</code> - Function. Call whenever a new segment update is available</li>
    <li><code>speechstate(state: ClientState)</code> - Function. Call whenever ClientState changes. Needed to show/hide element.</li>
    <li><code>speechhandled(success: boolean)</code> - Function. Optionally call on segment.isFinal to show confirmation that speech was processed. An indication will be shown with big-transcript.</li>
  </ul>
  <h3>Events emitted</h3>
  <ul>
    <li><code>visibilitychanged</code> - Called when visibility changes</li>
  </ul>
  <h3>Window messages listened</h3>
  <ul>
    <li><code>{type: "speechsegment", segment: Segment}</code> - Required. Updates transcript content in component. This message is automatically emitted by push-to-talk-button.</li>
    <li><code>{type: "speechstate", state: ClientState}</code> - Required. Needed to show/hide element. This message is automatically emitted by push-to-talk-button.</li>
    <li><code>{type: "speechhandled", success: boolean}</code> - Optional. Shows an indication to the user that the voice command was successfully understood by the app. Use window.postMessage to send it on segment.isFinal.</li>
  </ul>

</body>
</html>
